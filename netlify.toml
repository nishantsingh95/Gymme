[build]
  command = "CI=false npm run build"
  publish = "frontend/build"
  functions = "functions"
  [build.environment]
    NODE_ENV = "production"

[[plugins]]
  package = "@netlify/plugin-functions-install-core"

[functions]
  node_bundler = "esbuild"

# Redirect API calls to the function
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/api/:splat"
  status = 200

# Handle React Router (SPA)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Scheduled Functions for Automated Emails
[functions."scheduled-expiry-check"]
  schedule = "0 9 * * *"  # 9:00 AM daily (UTC)

[functions."scheduled-expired-reminder"]
  schedule = "0 10 * * *"  # 10:00 AM daily (UTC)

[functions."scheduled-status-update"]
  schedule = "0 0 * * *"  # 12:00 AM daily (UTC)
